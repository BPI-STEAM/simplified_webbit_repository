!function(){function t(t){let e={"#a55b67":"","#a55b6d":"","#a55b74":"","#a55b80":"#ee6666","#a55b8c":"","#a55b93":"","#a55b99":"","#a55ba5":"","#995ba5":"#888888","#935ba5":"","#8c5ba5":"","#805ba5":"","#745ba5":"#8866bb","#6d5ba5":"#bb7744","#675ba5":"#cc9966","#5b5ba5":"#44aaee","#5b67a5":"#3377c5","#5b6da5":"#6666bb","#5b74a5":"#8888ee","#5b80a5":"#66aad5","#5b8ca5":"#bb5555","#5b93a5":"#117733","#5b99a5":"#339955","#5b9fa5":"#4466bb","#5ba5a5":"#6688dd","#5ba599":"","#5ba593":"","#5ba58c":"#ff9900","#5ba580":"","#5ba574":"","#5ba56d":"#bb4488","#5ba567":"#dd66aa","#5ba55b":"#33bbaa","#67a55b":"#77b544","#6da55b":"#228888","#74a55b":"#33aaaa","#7aa55b":"#24a364","#80a55b":"#49b979","#8ca55b":"","#93a55b":"","#99a55b":"","#a5a55b":"","#a5995b":"","#a5935b":"#bb8822","#a58c5b":"#ddaa33","#a5865b":"#009933","#a5805b":"#00bb55","#a57a5b":"#aa3366","#a5745b":"#bb5588","#a56d5b":"","#a5675b":"#bb6644","#a5615b":"#994422","#a55b5b":""}[t];e||(e="#57e");let o=goog.color.hexToRgb(e);return{color:e,lighten:goog.color.rgbArrayToHex(goog.color.lighten(o,.3)),darken:goog.color.rgbArrayToHex(goog.color.darken(o,.1))}}Blockly.BlockSvg.START_HAT=!0,Blockly.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill","#888888"),this.bubbleArrow_.setAttribute("fill","#888888")},Blockly.BlockSvg.prototype.updateColour=function(){if(!this.disabled){var e=this.getColour(),o=goog.color.hexToRgb(e);if(this.isShadow())o=goog.color.lighten(o,.6),e=goog.color.rgbArrayToHex(o),this.svgPathLight_.style.display="none",this.svgPathDark_.setAttribute("fill",e);else{this.svgPathLight_.style.display="";var l=goog.color.rgbArrayToHex(goog.color.lighten(o,.3)),i=goog.color.rgbArrayToHex(goog.color.darken(o,.2));this.svgPathLight_.setAttribute("stroke",l),this.svgPathDark_.setAttribute("fill",i)}var r=t(e);this.svgPath_.setAttribute("fill",r.color),this.svgPathLight_.setAttribute("stroke",r.lighten),this.svgPathDark_.setAttribute("fill",r.darken);for(var s=this.getIcons(),n=0;n<s.length;n++)s[n].updateColour();for(var a,c=0;a=this.inputList[c];c++)for(var h,g=0;h=a.fieldRow[g];g++)h.setText(null)}},Blockly.Toolbox.TreeControl.prototype.setSelectedItem=function(e){var o=this.toolbox_;if(e!=this.selectedItem_&&e!=o.tree_){if(o.lastCategory_&&(o.lastCategory_.getRowElement().style.backgroundColor=""),e){var l=t(e.hexColour).color||"#57e";e.getRowElement().style.backgroundColor=l,o.addColour_(e)}var i=this.getSelectedItem();if(goog.ui.tree.TreeControl.prototype.setSelectedItem.call(this,e),e&&e.blocks&&e.blocks.length?(o.flyout_.show(e.blocks),o.lastCategory_!=e&&o.flyout_.scrollToStart()):o.flyout_.hide(),i!=e&&i!=this){var r=new Blockly.Events.Ui(null,"category",i&&i.getHtml(),e&&e.getHtml());r.workspaceId=o.workspace_.id,Blockly.Events.fire(r)}e&&(o.lastCategory_=e)}},Blockly.Toolbox.prototype.addColour_=function(e){for(var o,l=(e||this.tree_).getChildren(),i=0;o=l[i];i++){var r=o.getRowElement();if(r){if(this.hasColours_)var s="8px solid "+(t(o.hexColour).color||"#ddd");else s="none";this.workspace_.RTL?r.style.borderRight=s:r.style.borderLeft=s}this.addColour_(o)}},Blockly.ZoomControls.prototype.createDom=function(){var t=this.workspace_;this.svgGroup_=Blockly.createSvgElement("g",{class:"blocklyZoom"},null);var e=String(Math.random()).substring(2),o=Blockly.createSvgElement("clipPath",{id:"blocklyZoomresetClipPath"+e},this.svgGroup_);Blockly.createSvgElement("rect",{width:32,height:32,x:40,y:80},o);var l=Blockly.createSvgElement("image",{width:Blockly.SPRITE.width,height:Blockly.SPRITE.height,x:40,y:-12,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.svgGroup_);l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","media/sprites.png");o=Blockly.createSvgElement("clipPath",{id:"blocklyZoominClipPath"+e},this.svgGroup_);Blockly.createSvgElement("rect",{width:32,height:32,x:0,y:80},o);var i=Blockly.createSvgElement("image",{width:Blockly.SPRITE.width,height:Blockly.SPRITE.height,x:-32,y:-12,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.svgGroup_);i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","media/sprites.png");o=Blockly.createSvgElement("clipPath",{id:"blocklyZoomoutClipPath"+e},this.svgGroup_);Blockly.createSvgElement("rect",{width:32,height:32,x:80,y:80},o);var r=Blockly.createSvgElement("image",{width:Blockly.SPRITE.width,height:Blockly.SPRITE.height,x:16,y:-12,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.svgGroup_);return r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","media/sprites.png"),Blockly.bindEvent_(l,"mousedown",t,t.zoomReset),Blockly.bindEvent_(i,"mousedown",null,function(){t.zoomCenter(1)}),Blockly.bindEvent_(r,"mousedown",null,function(){t.zoomCenter(-1)}),this.svgGroup_},Blockly.ZoomControls.prototype.position=function(){var t=this.workspace_.getMetrics();t&&(this.workspace_.RTL?this.left_=this.MARGIN_SIDE_:this.left_=t.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_+100,this.top_=t.viewHeight+t.absoluteTop-this.HEIGHT_-this.MARGIN_BOTTOM_+5,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+") scale(.95)"))},Blockly.Trashcan.prototype.position=function(){var t=this.workspace_.getMetrics();t&&(this.workspace_.RTL?this.left_=this.MARGIN_SIDE_:this.left_=t.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_+82,this.top_=t.viewHeight+t.absoluteTop-(this.BODY_HEIGHT_+this.LID_HEIGHT_)-this.MARGIN_BOTTOM_+26,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+") scale(.58)"))},Blockly.FieldDropdown=function(t,e){this.menuGenerator_=t,this.trimOptions_();var o=this.getOptions_()[0];Blockly.FieldDropdown.superClass_.constructor.call(this,o[1],e)},goog.inherits(Blockly.FieldDropdown,Blockly.Field),Blockly.FieldDropdown.CHECKMARK_OVERHANG=25,Blockly.FieldDropdown.ARROW_CHAR=goog.userAgent.ANDROID?"▼":"▾",Blockly.FieldDropdown.prototype.CURSOR="default",Blockly.FieldDropdown.prototype.init=function(t){if(!this.fieldGroup_){this.arrow_=Blockly.createSvgElement("tspan",{},null),this.arrow_.appendChild(document.createTextNode(t.RTL?Blockly.FieldDropdown.ARROW_CHAR+" ":" "+Blockly.FieldDropdown.ARROW_CHAR)),Blockly.FieldDropdown.superClass_.init.call(this,t);var e=this.text_;this.text_=null,this.setText(e)}},window.keyBoardMenuOpen=!1,Blockly.FieldDropdown.prototype.showEditor_=function(){Blockly.WidgetDiv.show(this,this.sourceBlock_.RTL,null);var t=this;var e=new goog.ui.Menu;e.setRightToLeft(this.sourceBlock_.RTL);var o=this.getOptions_();let l,i,r=[];for(var s=0;s<o.length;s++){var n=o[s][0];-1!=n.indexOf("{")&&-1!=n.indexOf("}")&&(n=(l=JSON.parse(n)).title,r[s]=l);var a=o[s][1],c=new goog.ui.MenuItem(n);c.setRightToLeft(this.sourceBlock_.RTL),c.setValue(a),c.setCheckable(!0),e.addChild(c,!0),c.setChecked(a==this.value_)}e.children_.forEach(function(t,e){if(r[e]){let o=r[e];"true"==o.showTitle?o.src?t.element_.innerHTML=t.element_.innerHTML.replace(o.title,'<img src="'+o.src+'" style="width:'+o.width+"px; height:"+o.height+'px;"> <span>'+o.title+"<span>"):t.element_.innerHTML=t.element_.innerHTML.replace(o.title,'<i class="'+o.class+'"> <span>'+o.title+"<span>"):(t.element_.className+=" img-menu",o.src?t.element_.innerHTML=t.element_.innerHTML.replace(o.title,'<img src="'+o.src+'" style="width:'+o.width+"px; height:"+o.height+'px; border:2px solid #fff;"> <span style="display:none;">'+o.title+"<span>"):"true"==o.keyboard?(i="keyboard",t.element_.innerHTML=t.element_.innerHTML.replace(o.title,'<i class="'+o.class+'" attr-frequency="'+o.frequency+'"><span class="keyboard-icon-title" title="">'+o.title+"<span>")):t.element_.innerHTML=t.element_.innerHTML.replace(o.title,'<i class="'+o.class+'"><span style="display:none;">'+o.title+"<span>"))}}),"keyboard"==i&&setTimeout(function(){window.AudioContext=window.AudioContext||window.webkitAudioContext;let t=new AudioContext,e=document.querySelectorAll(".bit-buzzer-icon[attr-frequency]"),o={};for(let l=0;l<e.length;l++){let i=e[l];i.addEventListener("mouseenter",function(e){(o={})["f"+i.getAttribute("attr-frequency")]=!0,setTimeout(()=>{if(o["f"+i.getAttribute("attr-frequency")]){let e=i.getAttribute("attr-frequency"),o=t.createOscillator();o.frequency.value=e,o.type="sine",o.connect(t.destination),o.start(t.currentTime),o.stop(t.currentTime+.3)}},200)}),i.addEventListener("mouseout",function(t){o["f"+i.getAttribute("attr-frequency")]=!1})}}),goog.events.listen(e,goog.ui.Component.EventType.ACTION,function(e){var o=e.target;if(o){var l=o.getValue();if(t.sourceBlock_&&t.validator_){var i=t.validator_(l);void 0!==i&&(l=i)}null!==l&&t.setValue(l)}Blockly.WidgetDiv.hideIfOwner(t)}),window.keyBoardMenuOpen||e.getHandler().listen(e.getElement(),goog.events.EventType.TOUCHSTART,function(t){this.getOwnerControl(t.target).handleMouseDown(t)}),e.getHandler().listen(e.getElement(),goog.events.EventType.TOUCHEND,function(t){this.getOwnerControl(t.target).performActionInternal(t)});var h=goog.dom.getViewportSize(),g=goog.style.getViewportPageOffset(document),d=this.getAbsoluteXY_(),u=this.getScaledBBox_(),p=Blockly.WidgetDiv.DIV;e.render(p);var b=e.getElement();Blockly.addClass_(b,"blocklyDropdownMenu");var _=goog.style.getSize(b);_.height=b.scrollHeight,d.y+_.height+u.height>=h.height+g.y?d.y-=_.height-95:d.y+=u.height,this.sourceBlock_.RTL?(d.x+=u.width,d.x+=Blockly.FieldDropdown.CHECKMARK_OVERHANG,d.x<g.x+_.width&&(d.x=g.x+_.width)):(d.x-=Blockly.FieldDropdown.CHECKMARK_OVERHANG,d.x>h.width+g.x-_.width&&(d.x=h.width+g.x-_.width)),Blockly.WidgetDiv.position(d.x,d.y,h,g,this.sourceBlock_.RTL),e.setAllowAutoFocus(!0),b.focus()},Blockly.FieldDropdown.prototype.trimOptions_=function(){this.prefixField=null,this.suffixField=null;var t=this.menuGenerator_;if(goog.isArray(t)&&!(t.length<2)){var e=t.map(function(t){return t[0]}),o=Blockly.shortestStringLength(e),l=Blockly.commonWordPrefix(e,o),i=Blockly.commonWordSuffix(e,o);if((l||i)&&!(o<=l+i)){l&&(this.prefixField=e[0].substring(0,l-1)),i&&(this.suffixField=e[0].substr(1-i));for(var r=[],s=0;s<t.length;s++){var n=t[s][0],a=t[s][1];n=n.substring(l,n.length-i),r[s]=[n,a]}this.menuGenerator_=r}}},Blockly.FieldDropdown.prototype.getOptions_=function(){return goog.isFunction(this.menuGenerator_)?this.menuGenerator_.call(this):this.menuGenerator_},Blockly.FieldDropdown.prototype.getValue=function(){return this.value_},Blockly.FieldDropdown.prototype.setValue=function(t){if(null!==t&&t!==this.value_){this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.Change(this.sourceBlock_,"field",this.name,this.value_,t)),this.value_=t;for(var e=this.getOptions_(),o=0;o<e.length;o++)if(e[o][1]==t)return void this.setText(e[o][0]);this.setText(t)}},Blockly.FieldDropdown.prototype.setText=function(t){if(this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.getColour()),null===t||t===this.text_)return;let e;this.text_=t,-1!=t.indexOf("{")&&-1!=t.indexOf("}")&&(e=JSON.parse(t),this.text_=e.title),this.updateTextNode_(),this.textElement_&&(this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textElement_.firstChild):this.textElement_.appendChild(this.arrow_)),this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours_())},Blockly.FieldDropdown.prototype.dispose=function(){Blockly.WidgetDiv.hideIfOwner(this),Blockly.FieldDropdown.superClass_.dispose.call(this)}}();