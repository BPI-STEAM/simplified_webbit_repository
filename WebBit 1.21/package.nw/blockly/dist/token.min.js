!function(e,t,n,o){"use strict";var s,r;function c(){return e.get("access_token")&&e.get("userId")&&e.get("loggedIn")}n.Token={get:function(){return c()?{id:s,userId:r}:o},getId:function(){return s},getUserId:function(){return r},set:function(t,n){e.set("access_token",t.id,{expires:n}),e.set("userId",t.userId,{expires:n}),update()},unset:function(){e.remove("access_token"),e.remove("userId"),delete t.dataSources.remote.connector.remotes.auth},isset:c,isLoggedIn:function(n){c()?(s=e.get("access_token"),r=e.get("userId"),t.dataSources.remote.connector.remotes.auth={bearer:btoa(s),sendImmediately:!0},t.models.user.findById(r).then(function(e){n(!0)}).catch(function(t){e.remove("access_token"),e.remove("userId"),n(!1)})):n(!1)}}}(Cookies,app,window);